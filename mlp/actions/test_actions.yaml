- !new_action
  name: Regenerate
  action_type: FULL
  speed: SLOW
  cost: 3
  setup: []
  effects:
    - effect: !eff
        name: AddStatus
        extra_tags: ["plan"]
        status: !status
          name: Regeneration
          duration: -1
          power: !prop owner.ammo
      area: !prop source
  widget:
    icon: './data/linden-leaf.png'
    pressed_icon: './data/linden-leaf(1).png'

- !new_action
  name: SelfBurn
  action_type: FULL
  speed: SLOW
  cost: 1
  setup: []
  effects:
    - effect: !eff
        name: AddStatus
        extra_tags: ['plan']
        status: !status
          name: Burning
          duration: 2
          power: 3
      area: !prop source
  widget:

- !new_action
  name: LetDogsOut
  action_type: FULL
  speed: SLOW
  cost: 3
  setup:
    - name: target_cell
      cursor: adjacent_cell
      cursor_params:
        - !prop source
  effects:
    - effect: !eff
        name: Summon
        unit: !unit
          name: Dog
        owner: !prop owner.owner
      area: !prop action.target_cell
  widget:
    icon: './data/hound(1).png'
    pressed_icon: './data/hound.png'

- !new_action
  name: SummonDog
  action_type: FULL
  speed: SLOW
  cost: 0
  setup: []
  effects:
    - effect: !eff
        name: Summon
        unit: !unit
          name: Dog
        owner: !prop owner.owner
      area: !prop source
  widget:
    icon: './data/hound(1).png'
    pressed_icon: './data/hound.png'


- !new_action
  name: DogShot
  action_type: FULL
  speed: SLOW
  cost: 3
  setup:
    - name: target_cell   # Currebtly this is not a cell but a list of cells
      cursor: line
      cursor_params:
        - !prop source
  effects:
    - effect: !eff
        name: LaunchAction
        action_name: SummonDog
        setup: {}
      area: !area
        name: KRandomCells
        area: !prop action.target_cell.adjacent
        k: 1
        filter: !expr [!prop cell.object, "==", null]
  widget:
    icon: './data/paw(1).png'
    pressed_icon: './data/paw.png'
#- !new_action
#  name: Ricochet
#  setup:
#    - name: times
#  effects:
#    - effect: !eff
#        name: Damage
#    - effect: !eff
#        name: LaunchAction
#        action_name: Ricochet
#        setup:
#          times: !expr [!prop action.times, '-', 1]
#        area: !area
#          name: KNearestNeighbors
#          area: !area
#            name: Circle
#            center: !prop source
#            r: 2
#          k: 2
#          filter: !expr ["Ricocheted", "not in", !prop object]
#  check: !expr [!prop action.times, ">", 0]
#
#- !new_action
#  name: ChainShot
#  action_type: FULL
#  speed: SLOW
#  cost: 2
#  setup:
#    - name: target_cell
#      cursor: line
#      cursor_params:
#        - !prop source
#  effects:
#    - effect: !eff
#        name: Damage
#    - effect: !eff
#        name: LaunchAction
#        action_name: Ricochet
#        setup:
#          times: 2



- !new_action
  name: AgentShoot
  action_type: STANDARD
  speed: NORMAL
  cost: 1
  tags: ['ranged', 'aggression']
  signal:
    ranged: [2, 5]
  setup:
    - name: hit
      cursor: geometry
      cursor_params:
        - !area
          name: Circle
          center: !prop source
          radius: 5
        - !area
          name: Ray
          source: !prop source
          target: !prop selected
          length: 5
  effects:
    - effect: !eff
        name: Damage
        amount: 30
      area: !area
        name: Ray
        source: !prop owner.cell
        target: !prop action.hit
        length: 5
    - effect: !eff
        name: AddStatus
        extra_tags: ["plan"]
        status: !status
          name: Reloading
          duration: 2
      area: !prop owner.cell
  check: !expr ["Reloading", "not in", !prop owner]
  widget:
    icon: './data/gunshot.png'
    pressed_icon: './data/gunshot(1).png'

- !new_action
  name: AgentSidestep
  action_type: MOVE
  speed: FAST
  tags: ['movement', 'defense']
  cost: 2
  setup:
    - name: path
#      cursor: adjacent_cell
      cursor: geometry
      cursor_params:
        - !area
          name: Adjacent
          center: !prop source
        - !area
          name: Cell
          cell: !prop selected
  effects:
    - effect: !eff
        name: Move
        extra_tags: ["plan"]
        path: !prop action.path
      area: !prop source
  widget:
    icon: './data/run2.png'
    pressed_icon: './data/run.png'

- !new_action
  name: OldAttack
  action_type: STANDARD
  speed: NORMAL
  tags: ['melee', "aggression"]
  cost: 1
  signal:
    melee: 1
  setup:
    - name: lololo
      cursor: geometry
      cursor_params:
        - !area
          name: Adjacent
          center: !prop source
        - !area
          name: Adjacent
          center: !prop source
  effects:
    - effect: !eff
        name: Damage
        extra_tags: ["melee"]
        amount: 15
      area: !area
        name: Melee
        radius: 1
        center: !prop source
  widget:
    icon: './data/punch(1).png'
    pressed_icon: './data/punch.png'
