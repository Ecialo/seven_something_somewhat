#:import fch kivy.uix.filechooser

<HexCellWidget>:
    id: cell
    canvas:
        PushMatrix
        Translate:
            xy: self.pos
        Color:
            rgba: 0, 0, 0, 0.5*self.is_highlighted
        Mesh:
            vertices: self.mesh_vertices
            mode: 'triangle_fan'
            indices: range(6)
        Color:
            rgb: (self.select_color if self.is_selected else (0, 0, 0))
        Line:
            points: self.circuit
            width: 1.5
        PopMatrix



<-Hexgrid>:
    id: grid
    size_hint: (None, None)

<CompositeArena@RelativeLayout>:
    id: arena
    scale: 1.0
    size_hint: (None, None)
    size: background.size
    FullImage:
        id: background
        scale: arena.scale
        source: "./data/fonchik_pustynka1.png"
#    Hexgrid:
#    spl.SpriteLayer:
#        id: sprite_layer
#        size_hint: (None, None)
#        canvas:
#            Color:
#                rgba: (1.0, 0.0, 0.0, 0.5)
#            Rectangle:
#                pos: self.pos
#                size: self.size


<FullImage@Image>:
    id: img
    scale: 1.0
    allow_stretch: True
    size: self.texture.size if self.texture else (0, 0)
    size_hint: (None, None)
    on_scale: self.width = self.texture.width * self.scale; self.height = self.texture.height * self.scale
    canvas:
        Color:
            rgb: (1, 1, 1)
        Rectangle:
            pos: self.pos
            texture: self.texture
            size: self.size