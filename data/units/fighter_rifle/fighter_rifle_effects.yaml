- !new_eff
  name: ShootIfAble
  params:
    - shoot_area
  effects:
    - effect: !eff
        name: LaunchAction
        action_name: ShootBullet
        setup:
          target: !prop effect.shoot_area
      condition: !expr [!call [!prop effect.shoot_area, "length"], "!=", 0]

- !new_eff
  name: ShootLoaded
  params: []
  effects:
    - effect: !eff
        name: Damage
        amount: 35
      condition: !expr [!prop owner.loaded, "==", "bullet"]
    - effect: !eff
        name: BuckshotDamage
        line_of_fire: !area
          name: Ray
          source: !prop source
          target: !prop action.target
          length: 5
      condition: !expr [!prop owner.loaded, "==", "buckshot"]
    - effect: !eff
        name: JacanEffect
      condition: !expr [!prop owner.loaded, "==", "jacan"]

- !new_eff
  name: RemoveLoaded
  params: []
  effects:
    - effect: !eff
        name: ChangeStat
        extra_tags: ["plan"]
        stat_name: bullets
        value: !expr [!prop owner.bullets, "-", 1]
      condition: !expr [!prop owner.loaded, "==", "bullet"]
    - effect: !eff
        name: ChangeStat
        extra_tags: ["plan"]
        stat_name: buckshots
        value: !expr [!prop owner.buckshots, "-", 1]
      condition: !expr [!prop owner.loaded, "==", "buckshot"]
    - effect: !eff
        name: ChangeStat
        extra_tags: ["plan"]
        stat_name: jacans
        value: !expr [!prop owner.jacans, "-", 1]
      condition: !expr [!prop owner.loaded, "==", "jacan"]
    - effect: !eff
        name: ChangeStat
        extra_tags: ["plan"]
        stat_name: loaded
        value: "nothing"

- !new_eff
  name: BuckshotDamage
  params:
    - line_of_fire
  effects:
    - effect: !eff
        name: Damage
        amount: !expr ["(" ,6, "-", !call [!prop effect.line_of_fire, "length"], ")", "*", 10]

- !new_eff
  name: JacanEffect
  params: []
  effects:
    - effect: !eff
        name: Damage
        amount: 30
    - effect: !eff
        name: Stun
        power: 2



- !new_eff
  name: TestShoot
  params: []
  effects:
    - effect: !eff
        name: Damage
        amount: 35
        area: !area
          name: Ray
          source: !prop owner.cell
          target: !prop action.target
          length: 1